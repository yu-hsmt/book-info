{"ast":null,"code":"import _toConsumableArray from \"/Users/yu/vue-book-info-app____/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/yu/vue-book-info-app____/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.weak-map.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n// Utilities\nimport { eventName, isOn } from \"./helpers.mjs\";\nvar handlers = new WeakMap();\nexport function bindProps(el, props) {\n  Object.keys(props).forEach(function (k) {\n    if (isOn(k)) {\n      var _ref;\n      var name = eventName(k);\n      var handler = handlers.get(el);\n      if (props[k] == null) {\n        handler === null || handler === void 0 || handler.forEach(function (v) {\n          var _v = _slicedToArray(v, 2),\n            n = _v[0],\n            fn = _v[1];\n          if (n === name) {\n            el.removeEventListener(name, fn);\n            handler[\"delete\"](v);\n          }\n        });\n      } else if (!handler || !((_ref = _toConsumableArray(handler)) !== null && _ref !== void 0 && _ref.some(function (v) {\n        return v[0] === name && v[1] === props[k];\n      }))) {\n        el.addEventListener(name, props[k]);\n        var _handler = handler || new Set();\n        _handler.add([name, props[k]]);\n        if (!handlers.has(el)) handlers.set(el, _handler);\n      }\n    } else {\n      if (props[k] == null) {\n        el.removeAttribute(k);\n      } else {\n        el.setAttribute(k, props[k]);\n      }\n    }\n  });\n}\nexport function unbindProps(el, props) {\n  Object.keys(props).forEach(function (k) {\n    if (isOn(k)) {\n      var name = eventName(k);\n      var handler = handlers.get(el);\n      handler === null || handler === void 0 || handler.forEach(function (v) {\n        var _v2 = _slicedToArray(v, 2),\n          n = _v2[0],\n          fn = _v2[1];\n        if (n === name) {\n          el.removeEventListener(name, fn);\n          handler[\"delete\"](v);\n        }\n      });\n    } else {\n      el.removeAttribute(k);\n    }\n  });\n}","map":{"version":3,"names":["eventName","isOn","handlers","WeakMap","bindProps","el","props","Object","keys","forEach","k","_ref","name","handler","get","v","_v","_slicedToArray","n","fn","removeEventListener","_toConsumableArray","some","addEventListener","_handler","Set","add","has","set","removeAttribute","setAttribute","unbindProps","_v2"],"sources":["../../src/util/bindProps.ts"],"sourcesContent":["// Utilities\nimport { eventName, isOn } from '@/util/helpers'\n\nconst handlers = new WeakMap<HTMLElement, Set<[string, () => void]>>()\n\nexport function bindProps (el: HTMLElement, props: Record<string, any>) {\n  Object.keys(props).forEach(k => {\n    if (isOn(k)) {\n      const name = eventName(k)\n      const handler = handlers.get(el)\n      if (props[k] == null) {\n        handler?.forEach(v => {\n          const [n, fn] = v\n          if (n === name) {\n            el.removeEventListener(name, fn)\n            handler.delete(v)\n          }\n        })\n      } else if (!handler || ![...handler]?.some(v => v[0] === name && v[1] === props[k])) {\n        el.addEventListener(name, props[k])\n        const _handler = handler || new Set()\n        _handler.add([name, props[k]])\n        if (!handlers.has(el)) handlers.set(el, _handler)\n      }\n    } else {\n      if (props[k] == null) {\n        el.removeAttribute(k)\n      } else {\n        el.setAttribute(k, props[k])\n      }\n    }\n  })\n}\n\nexport function unbindProps (el: HTMLElement, props: Record<string, any>) {\n  Object.keys(props).forEach(k => {\n    if (isOn(k)) {\n      const name = eventName(k)\n      const handler = handlers.get(el)\n      handler?.forEach(v => {\n        const [n, fn] = v\n        if (n === name) {\n          el.removeEventListener(name, fn)\n          handler.delete(v)\n        }\n      })\n    } else {\n      el.removeAttribute(k)\n    }\n  })\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}