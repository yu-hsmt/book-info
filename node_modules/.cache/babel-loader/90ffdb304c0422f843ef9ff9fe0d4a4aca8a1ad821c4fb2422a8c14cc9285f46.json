{"ast":null,"code":"import _typeof from \"/Users/yu/vue-book-info-app____/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport _objectSpread from \"/Users/yu/vue-book-info-app____/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.string.ends-with.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/web.timers.js\";\nimport { withDirectives as _withDirectives, mergeProps as _mergeProps, resolveDirective as _resolveDirective, Fragment as _Fragment, createVNode as _createVNode } from \"vue\";\n// Styles\nimport \"./VImg.css\";\n\n// Components\nimport { makeVResponsiveProps, VResponsive } from \"../VResponsive/VResponsive.mjs\"; // Composables\nimport { useBackgroundColor } from \"../../composables/color.mjs\";\nimport { makeComponentProps } from \"../../composables/component.mjs\";\nimport { makeRoundedProps, useRounded } from \"../../composables/rounded.mjs\";\nimport { makeTransitionProps, MaybeTransition } from \"../../composables/transition.mjs\"; // Directives\nimport intersect from \"../../directives/intersect/index.mjs\"; // Utilities\nimport { computed, nextTick, onBeforeMount, onBeforeUnmount, ref, shallowRef, toRef, vShow, watch, withDirectives } from 'vue';\nimport { convertToUnit, genericComponent, getCurrentInstance, propsFactory, SUPPORTS_INTERSECTION, useRender } from \"../../util/index.mjs\"; // Types\n// not intended for public use, this is passed in by vuetify-loader\nexport var makeVImgProps = propsFactory(_objectSpread(_objectSpread(_objectSpread(_objectSpread({\n  absolute: Boolean,\n  alt: String,\n  cover: Boolean,\n  color: String,\n  draggable: {\n    type: [Boolean, String],\n    \"default\": undefined\n  },\n  eager: Boolean,\n  gradient: String,\n  lazySrc: String,\n  options: {\n    type: Object,\n    // For more information on types, navigate to:\n    // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\n    \"default\": function _default() {\n      return {\n        root: undefined,\n        rootMargin: undefined,\n        threshold: undefined\n      };\n    }\n  },\n  sizes: String,\n  src: {\n    type: [String, Object],\n    \"default\": ''\n  },\n  crossorigin: String,\n  referrerpolicy: String,\n  srcset: String,\n  position: String\n}, makeVResponsiveProps()), makeComponentProps()), makeRoundedProps()), makeTransitionProps()), 'VImg');\nexport var VImg = genericComponent()({\n  name: 'VImg',\n  directives: {\n    intersect: intersect\n  },\n  props: makeVImgProps(),\n  emits: {\n    loadstart: function loadstart(value) {\n      return true;\n    },\n    load: function load(value) {\n      return true;\n    },\n    error: function error(value) {\n      return true;\n    }\n  },\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n      slots = _ref.slots;\n    var _useBackgroundColor = useBackgroundColor(toRef(props, 'color')),\n      backgroundColorClasses = _useBackgroundColor.backgroundColorClasses,\n      backgroundColorStyles = _useBackgroundColor.backgroundColorStyles;\n    var _useRounded = useRounded(props),\n      roundedClasses = _useRounded.roundedClasses;\n    var vm = getCurrentInstance('VImg');\n    var currentSrc = shallowRef(''); // Set from srcset\n    var image = ref();\n    var state = shallowRef(props.eager ? 'loading' : 'idle');\n    var naturalWidth = shallowRef();\n    var naturalHeight = shallowRef();\n    var normalisedSrc = computed(function () {\n      return props.src && _typeof(props.src) === 'object' ? {\n        src: props.src.src,\n        srcset: props.srcset || props.src.srcset,\n        lazySrc: props.lazySrc || props.src.lazySrc,\n        aspect: Number(props.aspectRatio || props.src.aspect || 0)\n      } : {\n        src: props.src,\n        srcset: props.srcset,\n        lazySrc: props.lazySrc,\n        aspect: Number(props.aspectRatio || 0)\n      };\n    });\n    var aspectRatio = computed(function () {\n      return normalisedSrc.value.aspect || naturalWidth.value / naturalHeight.value || 0;\n    });\n    watch(function () {\n      return props.src;\n    }, function () {\n      init(state.value !== 'idle');\n    });\n    watch(aspectRatio, function (val, oldVal) {\n      if (!val && oldVal && image.value) {\n        pollForSize(image.value);\n      }\n    });\n\n    // TODO: getSrc when window width changes\n\n    onBeforeMount(function () {\n      return init();\n    });\n    function init(isIntersecting) {\n      if (props.eager && isIntersecting) return;\n      if (SUPPORTS_INTERSECTION && !isIntersecting && !props.eager) return;\n      state.value = 'loading';\n      if (normalisedSrc.value.lazySrc) {\n        var lazyImg = new Image();\n        lazyImg.src = normalisedSrc.value.lazySrc;\n        pollForSize(lazyImg, null);\n      }\n      if (!normalisedSrc.value.src) return;\n      nextTick(function () {\n        var _image$value;\n        emit('loadstart', ((_image$value = image.value) === null || _image$value === void 0 ? void 0 : _image$value.currentSrc) || normalisedSrc.value.src);\n        setTimeout(function () {\n          var _image$value2;\n          if (vm.isUnmounted) return;\n          if ((_image$value2 = image.value) !== null && _image$value2 !== void 0 && _image$value2.complete) {\n            if (!image.value.naturalWidth) {\n              onError();\n            }\n            if (state.value === 'error') return;\n            if (!aspectRatio.value) pollForSize(image.value, null);\n            if (state.value === 'loading') onLoad();\n          } else {\n            if (!aspectRatio.value) pollForSize(image.value);\n            getSrc();\n          }\n        });\n      });\n    }\n    function onLoad() {\n      var _image$value3;\n      if (vm.isUnmounted) return;\n      getSrc();\n      pollForSize(image.value);\n      state.value = 'loaded';\n      emit('load', ((_image$value3 = image.value) === null || _image$value3 === void 0 ? void 0 : _image$value3.currentSrc) || normalisedSrc.value.src);\n    }\n    function onError() {\n      var _image$value4;\n      if (vm.isUnmounted) return;\n      state.value = 'error';\n      emit('error', ((_image$value4 = image.value) === null || _image$value4 === void 0 ? void 0 : _image$value4.currentSrc) || normalisedSrc.value.src);\n    }\n    function getSrc() {\n      var img = image.value;\n      if (img) currentSrc.value = img.currentSrc || img.src;\n    }\n    var timer = -1;\n    onBeforeUnmount(function () {\n      clearTimeout(timer);\n    });\n    function pollForSize(img) {\n      var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;\n      var _poll = function poll() {\n        clearTimeout(timer);\n        if (vm.isUnmounted) return;\n        var imgHeight = img.naturalHeight,\n          imgWidth = img.naturalWidth;\n        if (imgHeight || imgWidth) {\n          naturalWidth.value = imgWidth;\n          naturalHeight.value = imgHeight;\n        } else if (!img.complete && state.value === 'loading' && timeout != null) {\n          timer = window.setTimeout(_poll, timeout);\n        } else if (img.currentSrc.endsWith('.svg') || img.currentSrc.startsWith('data:image/svg+xml')) {\n          naturalWidth.value = 1;\n          naturalHeight.value = 1;\n        }\n      };\n      _poll();\n    }\n    var containClasses = computed(function () {\n      return {\n        'v-img__img--cover': props.cover,\n        'v-img__img--contain': !props.cover\n      };\n    });\n    var __image = function __image() {\n      var _slots$sources;\n      if (!normalisedSrc.value.src || state.value === 'idle') return null;\n      var img = _createVNode(\"img\", {\n        \"class\": ['v-img__img', containClasses.value],\n        \"style\": {\n          objectPosition: props.position\n        },\n        \"src\": normalisedSrc.value.src,\n        \"srcset\": normalisedSrc.value.srcset,\n        \"alt\": props.alt,\n        \"crossorigin\": props.crossorigin,\n        \"referrerpolicy\": props.referrerpolicy,\n        \"draggable\": props.draggable,\n        \"sizes\": props.sizes,\n        \"ref\": image,\n        \"onLoad\": onLoad,\n        \"onError\": onError\n      }, null);\n      var sources = (_slots$sources = slots.sources) === null || _slots$sources === void 0 ? void 0 : _slots$sources.call(slots);\n      return _createVNode(MaybeTransition, {\n        \"transition\": props.transition,\n        \"appear\": true\n      }, {\n        \"default\": function _default() {\n          return [withDirectives(sources ? _createVNode(\"picture\", {\n            \"class\": \"v-img__picture\"\n          }, [sources, img]) : img, [[vShow, state.value === 'loaded']])];\n        }\n      });\n    };\n    var __preloadImage = function __preloadImage() {\n      return _createVNode(MaybeTransition, {\n        \"transition\": props.transition\n      }, {\n        \"default\": function _default() {\n          return [normalisedSrc.value.lazySrc && state.value !== 'loaded' && _createVNode(\"img\", {\n            \"class\": ['v-img__img', 'v-img__img--preload', containClasses.value],\n            \"style\": {\n              objectPosition: props.position\n            },\n            \"src\": normalisedSrc.value.lazySrc,\n            \"alt\": props.alt,\n            \"crossorigin\": props.crossorigin,\n            \"referrerpolicy\": props.referrerpolicy,\n            \"draggable\": props.draggable\n          }, null)];\n        }\n      });\n    };\n    var __placeholder = function __placeholder() {\n      if (!slots.placeholder) return null;\n      return _createVNode(MaybeTransition, {\n        \"transition\": props.transition,\n        \"appear\": true\n      }, {\n        \"default\": function _default() {\n          return [(state.value === 'loading' || state.value === 'error' && !slots.error) && _createVNode(\"div\", {\n            \"class\": \"v-img__placeholder\"\n          }, [slots.placeholder()])];\n        }\n      });\n    };\n    var __error = function __error() {\n      if (!slots.error) return null;\n      return _createVNode(MaybeTransition, {\n        \"transition\": props.transition,\n        \"appear\": true\n      }, {\n        \"default\": function _default() {\n          return [state.value === 'error' && _createVNode(\"div\", {\n            \"class\": \"v-img__error\"\n          }, [slots.error()])];\n        }\n      });\n    };\n    var __gradient = function __gradient() {\n      if (!props.gradient) return null;\n      return _createVNode(\"div\", {\n        \"class\": \"v-img__gradient\",\n        \"style\": {\n          backgroundImage: \"linear-gradient(\".concat(props.gradient, \")\")\n        }\n      }, null);\n    };\n    var isBooted = shallowRef(false);\n    {\n      var stop = watch(aspectRatio, function (val) {\n        if (val) {\n          // Doesn't work with nextTick, idk why\n          requestAnimationFrame(function () {\n            requestAnimationFrame(function () {\n              isBooted.value = true;\n            });\n          });\n          stop();\n        }\n      });\n    }\n    useRender(function () {\n      var responsiveProps = VResponsive.filterProps(props);\n      return _withDirectives(_createVNode(VResponsive, _mergeProps({\n        \"class\": ['v-img', {\n          'v-img--absolute': props.absolute,\n          'v-img--booting': !isBooted.value\n        }, backgroundColorClasses.value, roundedClasses.value, props[\"class\"]],\n        \"style\": [{\n          width: convertToUnit(props.width === 'auto' ? naturalWidth.value : props.width)\n        }, backgroundColorStyles.value, props.style]\n      }, responsiveProps, {\n        \"aspectRatio\": aspectRatio.value,\n        \"aria-label\": props.alt,\n        \"role\": props.alt ? 'img' : undefined\n      }), {\n        additional: function additional() {\n          return _createVNode(_Fragment, null, [_createVNode(__image, null, null), _createVNode(__preloadImage, null, null), _createVNode(__gradient, null, null), _createVNode(__placeholder, null, null), _createVNode(__error, null, null)]);\n        },\n        \"default\": slots[\"default\"]\n      }), [[_resolveDirective(\"intersect\"), {\n        handler: init,\n        options: props.options\n      }, null, {\n        once: true\n      }]]);\n    });\n    return {\n      currentSrc: currentSrc,\n      image: image,\n      state: state,\n      naturalWidth: naturalWidth,\n      naturalHeight: naturalHeight\n    };\n  }\n});","map":{"version":3,"names":["makeVResponsiveProps","VResponsive","useBackgroundColor","makeComponentProps","makeRoundedProps","useRounded","makeTransitionProps","MaybeTransition","intersect","computed","nextTick","onBeforeMount","onBeforeUnmount","ref","shallowRef","toRef","vShow","watch","withDirectives","convertToUnit","genericComponent","getCurrentInstance","propsFactory","SUPPORTS_INTERSECTION","useRender","makeVImgProps","_objectSpread","absolute","Boolean","alt","String","cover","color","draggable","type","undefined","eager","gradient","lazySrc","options","Object","default","root","rootMargin","threshold","sizes","src","crossorigin","referrerpolicy","srcset","position","VImg","name","directives","props","emits","loadstart","value","load","error","setup","_ref","emit","slots","_useBackgroundColor","backgroundColorClasses","backgroundColorStyles","_useRounded","roundedClasses","vm","currentSrc","image","state","naturalWidth","naturalHeight","normalisedSrc","_typeof","aspect","Number","aspectRatio","init","val","oldVal","pollForSize","isIntersecting","lazyImg","Image","_image$value","setTimeout","_image$value2","isUnmounted","complete","onError","onLoad","getSrc","_image$value3","_image$value4","img","timer","clearTimeout","timeout","arguments","length","poll","imgHeight","imgWidth","window","endsWith","startsWith","containClasses","__image","_slots$sources","_createVNode","objectPosition","sources","call","transition","__preloadImage","__placeholder","placeholder","__error","__gradient","backgroundImage","concat","isBooted","stop","requestAnimationFrame","responsiveProps","filterProps","_withDirectives","_mergeProps","width","style","additional","_Fragment","_resolveDirective","handler","once"],"sources":["../../../src/components/VImg/VImg.tsx"],"sourcesContent":["// Styles\nimport './VImg.sass'\n\n// Components\nimport { makeVResponsiveProps, VResponsive } from '@/components/VResponsive/VResponsive'\n\n// Composables\nimport { useBackgroundColor } from '@/composables/color'\nimport { makeComponentProps } from '@/composables/component'\nimport { makeRoundedProps, useRounded } from '@/composables/rounded'\nimport { makeTransitionProps, MaybeTransition } from '@/composables/transition'\n\n// Directives\nimport intersect from '@/directives/intersect'\n\n// Utilities\nimport {\n  computed,\n  nextTick,\n  onBeforeMount,\n  onBeforeUnmount,\n  ref,\n  shallowRef,\n  toRef,\n  vShow,\n  watch,\n  withDirectives,\n} from 'vue'\nimport {\n  convertToUnit,\n  genericComponent,\n  getCurrentInstance,\n  propsFactory,\n  SUPPORTS_INTERSECTION,\n  useRender,\n} from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\n\n// not intended for public use, this is passed in by vuetify-loader\nexport interface srcObject {\n  src?: string\n  srcset?: string\n  lazySrc?: string\n  aspect: number\n}\n\nexport type VImgSlots = {\n  default: never\n  placeholder: never\n  error: never\n  sources: never\n}\n\nexport const makeVImgProps = propsFactory({\n  absolute: Boolean,\n  alt: String,\n  cover: Boolean,\n  color: String,\n  draggable: {\n    type: [Boolean, String] as PropType<boolean | 'true' | 'false'>,\n    default: undefined,\n  },\n  eager: Boolean,\n  gradient: String,\n  lazySrc: String,\n  options: {\n    type: Object as PropType<IntersectionObserverInit>,\n    // For more information on types, navigate to:\n    // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\n    default: () => ({\n      root: undefined,\n      rootMargin: undefined,\n      threshold: undefined,\n    }),\n  },\n  sizes: String,\n  src: {\n    type: [String, Object] as PropType<string | srcObject>,\n    default: '',\n  },\n  crossorigin: String as PropType<'' | 'anonymous' | 'use-credentials'>,\n  referrerpolicy: String as PropType<\n    | 'no-referrer'\n    | 'no-referrer-when-downgrade'\n    | 'origin'\n    | 'origin-when-cross-origin'\n    | 'same-origin'\n    | 'strict-origin'\n    | 'strict-origin-when-cross-origin'\n    | 'unsafe-url'\n  >,\n  srcset: String,\n  position: String,\n\n  ...makeVResponsiveProps(),\n  ...makeComponentProps(),\n  ...makeRoundedProps(),\n  ...makeTransitionProps(),\n}, 'VImg')\n\nexport const VImg = genericComponent<VImgSlots>()({\n  name: 'VImg',\n\n  directives: { intersect },\n\n  props: makeVImgProps(),\n\n  emits: {\n    loadstart: (value: string | undefined) => true,\n    load: (value: string | undefined) => true,\n    error: (value: string | undefined) => true,\n  },\n\n  setup (props, { emit, slots }) {\n    const { backgroundColorClasses, backgroundColorStyles } = useBackgroundColor(toRef(props, 'color'))\n    const { roundedClasses } = useRounded(props)\n    const vm = getCurrentInstance('VImg')\n\n    const currentSrc = shallowRef('') // Set from srcset\n    const image = ref<HTMLImageElement>()\n    const state = shallowRef<'idle' | 'loading' | 'loaded' | 'error'>(props.eager ? 'loading' : 'idle')\n    const naturalWidth = shallowRef<number>()\n    const naturalHeight = shallowRef<number>()\n\n    const normalisedSrc = computed<srcObject>(() => {\n      return props.src && typeof props.src === 'object'\n        ? {\n          src: props.src.src,\n          srcset: props.srcset || props.src.srcset,\n          lazySrc: props.lazySrc || props.src.lazySrc,\n          aspect: Number(props.aspectRatio || props.src.aspect || 0),\n        } : {\n          src: props.src,\n          srcset: props.srcset,\n          lazySrc: props.lazySrc,\n          aspect: Number(props.aspectRatio || 0),\n        }\n    })\n    const aspectRatio = computed(() => {\n      return normalisedSrc.value.aspect || naturalWidth.value! / naturalHeight.value! || 0\n    })\n\n    watch(() => props.src, () => {\n      init(state.value !== 'idle')\n    })\n    watch(aspectRatio, (val, oldVal) => {\n      if (!val && oldVal && image.value) {\n        pollForSize(image.value)\n      }\n    })\n\n    // TODO: getSrc when window width changes\n\n    onBeforeMount(() => init())\n\n    function init (isIntersecting?: boolean) {\n      if (props.eager && isIntersecting) return\n      if (\n        SUPPORTS_INTERSECTION &&\n        !isIntersecting &&\n        !props.eager\n      ) return\n\n      state.value = 'loading'\n\n      if (normalisedSrc.value.lazySrc) {\n        const lazyImg = new Image()\n        lazyImg.src = normalisedSrc.value.lazySrc\n        pollForSize(lazyImg, null)\n      }\n\n      if (!normalisedSrc.value.src) return\n\n      nextTick(() => {\n        emit('loadstart', image.value?.currentSrc || normalisedSrc.value.src)\n\n        setTimeout(() => {\n          if (vm.isUnmounted) return\n\n          if (image.value?.complete) {\n            if (!image.value.naturalWidth) {\n              onError()\n            }\n\n            if (state.value === 'error') return\n\n            if (!aspectRatio.value) pollForSize(image.value, null)\n            if (state.value === 'loading') onLoad()\n          } else {\n            if (!aspectRatio.value) pollForSize(image.value!)\n            getSrc()\n          }\n        })\n      })\n    }\n\n    function onLoad () {\n      if (vm.isUnmounted) return\n\n      getSrc()\n      pollForSize(image.value!)\n      state.value = 'loaded'\n      emit('load', image.value?.currentSrc || normalisedSrc.value.src)\n    }\n\n    function onError () {\n      if (vm.isUnmounted) return\n\n      state.value = 'error'\n      emit('error', image.value?.currentSrc || normalisedSrc.value.src)\n    }\n\n    function getSrc () {\n      const img = image.value\n      if (img) currentSrc.value = img.currentSrc || img.src\n    }\n\n    let timer = -1\n\n    onBeforeUnmount(() => {\n      clearTimeout(timer)\n    })\n\n    function pollForSize (img: HTMLImageElement, timeout: number | null = 100) {\n      const poll = () => {\n        clearTimeout(timer)\n        if (vm.isUnmounted) return\n\n        const { naturalHeight: imgHeight, naturalWidth: imgWidth } = img\n\n        if (imgHeight || imgWidth) {\n          naturalWidth.value = imgWidth\n          naturalHeight.value = imgHeight\n        } else if (!img.complete && state.value === 'loading' && timeout != null) {\n          timer = window.setTimeout(poll, timeout)\n        } else if (img.currentSrc.endsWith('.svg') || img.currentSrc.startsWith('data:image/svg+xml')) {\n          naturalWidth.value = 1\n          naturalHeight.value = 1\n        }\n      }\n\n      poll()\n    }\n\n    const containClasses = computed(() => ({\n      'v-img__img--cover': props.cover,\n      'v-img__img--contain': !props.cover,\n    }))\n\n    const __image = () => {\n      if (!normalisedSrc.value.src || state.value === 'idle') return null\n\n      const img = (\n        <img\n          class={['v-img__img', containClasses.value]}\n          style={{ objectPosition: props.position }}\n          src={ normalisedSrc.value.src }\n          srcset={ normalisedSrc.value.srcset }\n          alt={ props.alt }\n          crossorigin={ props.crossorigin }\n          referrerpolicy={ props.referrerpolicy }\n          draggable={ props.draggable }\n          sizes={ props.sizes }\n          ref={ image }\n          onLoad={ onLoad }\n          onError={ onError }\n        />\n      )\n\n      const sources = slots.sources?.()\n\n      return (\n        <MaybeTransition transition={ props.transition } appear>\n          {\n            withDirectives(\n              sources\n                ? <picture class=\"v-img__picture\">{ sources }{ img }</picture>\n                : img,\n              [[vShow, state.value === 'loaded']]\n            )\n          }\n        </MaybeTransition>\n      )\n    }\n\n    const __preloadImage = () => (\n      <MaybeTransition transition={ props.transition }>\n        { normalisedSrc.value.lazySrc && state.value !== 'loaded' && (\n          <img\n            class={['v-img__img', 'v-img__img--preload', containClasses.value]}\n            style={{ objectPosition: props.position }}\n            src={ normalisedSrc.value.lazySrc }\n            alt={ props.alt }\n            crossorigin={ props.crossorigin }\n            referrerpolicy={ props.referrerpolicy }\n            draggable={ props.draggable }\n          />\n        )}\n      </MaybeTransition>\n    )\n\n    const __placeholder = () => {\n      if (!slots.placeholder) return null\n\n      return (\n        <MaybeTransition transition={ props.transition } appear>\n          { (state.value === 'loading' || (state.value === 'error' && !slots.error)) &&\n          <div class=\"v-img__placeholder\">{ slots.placeholder() }</div>\n          }\n        </MaybeTransition>\n      )\n    }\n\n    const __error = () => {\n      if (!slots.error) return null\n\n      return (\n        <MaybeTransition transition={ props.transition } appear>\n          { state.value === 'error' &&\n            <div class=\"v-img__error\">{ slots.error() }</div>\n          }\n        </MaybeTransition>\n      )\n    }\n\n    const __gradient = () => {\n      if (!props.gradient) return null\n\n      return <div class=\"v-img__gradient\" style={{ backgroundImage: `linear-gradient(${props.gradient})` }} />\n    }\n\n    const isBooted = shallowRef(false)\n    {\n      const stop = watch(aspectRatio, val => {\n        if (val) {\n          // Doesn't work with nextTick, idk why\n          requestAnimationFrame(() => {\n            requestAnimationFrame(() => {\n              isBooted.value = true\n            })\n          })\n          stop()\n        }\n      })\n    }\n\n    useRender(() => {\n      const responsiveProps = VResponsive.filterProps(props)\n      return (\n        <VResponsive\n          class={[\n            'v-img',\n            {\n              'v-img--absolute': props.absolute,\n              'v-img--booting': !isBooted.value,\n            },\n            backgroundColorClasses.value,\n            roundedClasses.value,\n            props.class,\n          ]}\n          style={[\n            { width: convertToUnit(props.width === 'auto' ? naturalWidth.value : props.width) },\n            backgroundColorStyles.value,\n            props.style,\n          ]}\n          { ...responsiveProps }\n          aspectRatio={ aspectRatio.value }\n          aria-label={ props.alt }\n          role={ props.alt ? 'img' : undefined }\n          v-intersect={[{\n            handler: init,\n            options: props.options,\n          }, null, ['once']]}\n        >{{\n          additional: () => (\n            <>\n              <__image />\n              <__preloadImage />\n              <__gradient />\n              <__placeholder />\n              <__error />\n            </>\n          ),\n          default: slots.default,\n        }}</VResponsive>\n      )\n    })\n\n    return {\n      currentSrc,\n      image,\n      state,\n      naturalWidth,\n      naturalHeight,\n    }\n  },\n})\n\nexport type VImg = InstanceType<typeof VImg>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}