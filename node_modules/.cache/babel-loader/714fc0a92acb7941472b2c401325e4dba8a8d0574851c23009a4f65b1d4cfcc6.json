{"ast":null,"code":"import _toConsumableArray from \"/Users/yu/vue-book-info-app____/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _typeof from \"/Users/yu/vue-book-info-app____/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.bind.js\";\nimport \"core-js/modules/es.object.get-prototype-of.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.reflect.get.js\";\nimport \"core-js/modules/es.reflect.get-own-property-descriptor.js\";\nimport \"core-js/modules/es.reflect.has.js\";\nimport \"core-js/modules/es.reflect.set.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\n// Types\n\nvar Refs = Symbol('Forwarded refs');\n\n/** Omit properties starting with P */\n\nfunction getDescriptor(obj, key) {\n  var currentObj = obj;\n  while (currentObj) {\n    var descriptor = Reflect.getOwnPropertyDescriptor(currentObj, key);\n    if (descriptor) return descriptor;\n    currentObj = Object.getPrototypeOf(currentObj);\n  }\n  return undefined;\n}\nexport function forwardRefs(target) {\n  for (var _len = arguments.length, refs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    refs[_key - 1] = arguments[_key];\n  }\n  target[Refs] = refs;\n  return new Proxy(target, {\n    get: function get(target, key) {\n      if (Reflect.has(target, key)) {\n        return Reflect.get(target, key);\n      }\n\n      // Skip internal properties\n      if (_typeof(key) === 'symbol' || key.startsWith('$') || key.startsWith('__')) return;\n      for (var _i = 0, _refs = refs; _i < _refs.length; _i++) {\n        var ref = _refs[_i];\n        if (ref.value && Reflect.has(ref.value, key)) {\n          var val = Reflect.get(ref.value, key);\n          return typeof val === 'function' ? val.bind(ref.value) : val;\n        }\n      }\n    },\n    has: function has(target, key) {\n      if (Reflect.has(target, key)) {\n        return true;\n      }\n\n      // Skip internal properties\n      if (_typeof(key) === 'symbol' || key.startsWith('$') || key.startsWith('__')) return false;\n      for (var _i2 = 0, _refs2 = refs; _i2 < _refs2.length; _i2++) {\n        var ref = _refs2[_i2];\n        if (ref.value && Reflect.has(ref.value, key)) {\n          return true;\n        }\n      }\n      return false;\n    },\n    set: function set(target, key, value) {\n      if (Reflect.has(target, key)) {\n        return Reflect.set(target, key, value);\n      }\n\n      // Skip internal properties\n      if (_typeof(key) === 'symbol' || key.startsWith('$') || key.startsWith('__')) return false;\n      for (var _i3 = 0, _refs3 = refs; _i3 < _refs3.length; _i3++) {\n        var ref = _refs3[_i3];\n        if (ref.value && Reflect.has(ref.value, key)) {\n          return Reflect.set(ref.value, key, value);\n        }\n      }\n      return false;\n    },\n    getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, key) {\n      var descriptor = Reflect.getOwnPropertyDescriptor(target, key);\n      if (descriptor) return descriptor;\n\n      // Skip internal properties\n      if (_typeof(key) === 'symbol' || key.startsWith('$') || key.startsWith('__')) return;\n\n      // Check each ref's own properties\n      for (var _i4 = 0, _refs4 = refs; _i4 < _refs4.length; _i4++) {\n        var _getDescriptor, _ref$value$_;\n        var ref = _refs4[_i4];\n        if (!ref.value) continue;\n        var _descriptor = (_getDescriptor = getDescriptor(ref.value, key)) !== null && _getDescriptor !== void 0 ? _getDescriptor : '_' in ref.value ? getDescriptor((_ref$value$_ = ref.value._) === null || _ref$value$_ === void 0 ? void 0 : _ref$value$_.setupState, key) : undefined;\n        if (_descriptor) return _descriptor;\n      }\n\n      // Recursive search up each ref's prototype\n      for (var _i5 = 0, _refs5 = refs; _i5 < _refs5.length; _i5++) {\n        var _ref = _refs5[_i5];\n        var childRefs = _ref.value && _ref.value[Refs];\n        if (!childRefs) continue;\n        var queue = childRefs.slice();\n        while (queue.length) {\n          var _ref2 = queue.shift();\n          var _descriptor2 = getDescriptor(_ref2.value, key);\n          if (_descriptor2) return _descriptor2;\n          var _childRefs = _ref2.value && _ref2.value[Refs];\n          if (_childRefs) queue.push.apply(queue, _toConsumableArray(_childRefs));\n        }\n      }\n      return undefined;\n    }\n  });\n}","map":{"version":3,"names":["Refs","Symbol","getDescriptor","obj","key","currentObj","descriptor","Reflect","getOwnPropertyDescriptor","Object","getPrototypeOf","undefined","forwardRefs","target","_len","arguments","length","refs","Array","_key","Proxy","get","has","_typeof","startsWith","_i","_refs","ref","value","val","bind","_i2","_refs2","set","_i3","_refs3","_i4","_refs4","_getDescriptor","_ref$value$_","_","setupState","_i5","_refs5","childRefs","queue","slice","shift","push","apply","_toConsumableArray"],"sources":["../../src/composables/forwardRefs.ts"],"sourcesContent":["// Types\nimport type { ComponentPublicInstance, Ref, UnwrapRef } from 'vue'\nimport type { UnionToIntersection } from '@/util'\n\nconst Refs = Symbol('Forwarded refs')\n\n/** Omit properties starting with P */\ntype OmitPrefix<T, P extends string> = [Extract<keyof T, `${P}${any}`>] extends [never] ? T : Omit<T, `${P}${any}`>\n\ntype OmitProps<T> = T extends { $props: any } ? Omit<T, keyof T['$props']> : T\n\nfunction getDescriptor (obj: any, key: PropertyKey) {\n  let currentObj = obj\n  while (currentObj) {\n    const descriptor = Reflect.getOwnPropertyDescriptor(currentObj, key)\n    if (descriptor) return descriptor\n    currentObj = Object.getPrototypeOf(currentObj)\n  }\n  return undefined\n}\n\nexport function forwardRefs<T extends {}, U extends Ref<HTMLElement | Omit<ComponentPublicInstance, '$emit' | '$slots'> | undefined>[]> (\n  target: T,\n  ...refs: U\n): T & UnionToIntersection<{ [K in keyof U]: OmitPrefix<OmitProps<NonNullable<UnwrapRef<U[K]>>>, '$'> }[number]> {\n  (target as any)[Refs] = refs\n\n  return new Proxy(target, {\n    get (target, key) {\n      if (Reflect.has(target, key)) {\n        return Reflect.get(target, key)\n      }\n\n      // Skip internal properties\n      if (typeof key === 'symbol' || key.startsWith('$') || key.startsWith('__')) return\n\n      for (const ref of refs) {\n        if (ref.value && Reflect.has(ref.value, key)) {\n          const val = Reflect.get(ref.value, key)\n          return typeof val === 'function'\n            ? val.bind(ref.value)\n            : val\n        }\n      }\n    },\n    has (target, key) {\n      if (Reflect.has(target, key)) {\n        return true\n      }\n\n      // Skip internal properties\n      if (typeof key === 'symbol' || key.startsWith('$') || key.startsWith('__')) return false\n\n      for (const ref of refs) {\n        if (ref.value && Reflect.has(ref.value, key)) {\n          return true\n        }\n      }\n      return false\n    },\n    set (target, key, value) {\n      if (Reflect.has(target, key)) {\n        return Reflect.set(target, key, value)\n      }\n\n      // Skip internal properties\n      if (typeof key === 'symbol' || key.startsWith('$') || key.startsWith('__')) return false\n\n      for (const ref of refs) {\n        if (ref.value && Reflect.has(ref.value, key)) {\n          return Reflect.set(ref.value, key, value)\n        }\n      }\n\n      return false\n    },\n    getOwnPropertyDescriptor (target, key) {\n      const descriptor = Reflect.getOwnPropertyDescriptor(target, key)\n      if (descriptor) return descriptor\n\n      // Skip internal properties\n      if (typeof key === 'symbol' || key.startsWith('$') || key.startsWith('__')) return\n\n      // Check each ref's own properties\n      for (const ref of refs) {\n        if (!ref.value) continue\n        const descriptor = getDescriptor(ref.value, key) ?? ('_' in ref.value ? getDescriptor(ref.value._?.setupState, key) : undefined)\n        if (descriptor) return descriptor\n      }\n\n      // Recursive search up each ref's prototype\n      for (const ref of refs) {\n        const childRefs = ref.value && (ref.value as any)[Refs]\n        if (!childRefs) continue\n        const queue = childRefs.slice()\n        while (queue.length) {\n          const ref = queue.shift()\n          const descriptor = getDescriptor(ref.value, key)\n          if (descriptor) return descriptor\n          const childRefs = ref.value && (ref.value as any)[Refs]\n          if (childRefs) queue.push(...childRefs)\n        }\n      }\n\n      return undefined\n    },\n  }) as any\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}